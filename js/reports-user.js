document.addEventListener('DOMContentLoaded',()=>{
  const cards=document.getElementById('cards'); const overdueList=document.getElementById('overdueList');
  auth.onAuthStateChanged(async (user)=>{ if(!user) return; const email=user.email; const snap=await tasksCol.where('assignedTo','==',email).get(); const tasks=snap.docs.map(d=>d.data()); renderCards(cards,tasks); const today=new Date(); today.setHours(0,0,0,0); const overdue=tasks.filter(t=>t.deadline && new Date(t.deadline)<today && t.status!=='done'); overdueList.innerHTML = overdue.length ? overdue.map(t=>`<li class="task"><div class="title">${t.title}</div><div class="meta">Due ${new Date(t.deadline).toLocaleDateString()} â€¢ <span class="badge ${t.priority?('priority-'+t.priority):''}">${t.priority}</span></div></li>`).join('') : "<li class='muted'>No overdue tasks ðŸŽ‰</li>"; });
});